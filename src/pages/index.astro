---
/**
 * Withinly Landing Page (English) - Fixed and Complete
 *
 * @description Clean, accessible landing page with proper translations and consistent design
 */

import DefaultLayout from '../layouts/DefaultLayout.astro'
import HeroWithinly from '../components/HeroWithinly.astro'
import OpeningHook from '../components/OpeningHook.astro'
import HowItWorks from '../components/HowItWorks.astro'
// DifferentiatorSection kept in codebase for reference but not used on page
// import DifferentiatorSection from '../components/DifferentiatorSection.astro'
import TriedBeforeSection from '../components/TriedBeforeSection.astro'
import FeatureComparison from '../components/FeatureComparison.astro'
// TestimonialSlider kept in codebase for reference but not used on this page
// import TestimonialSlider from '../components/TestimonialSlider.astro'
// TrustSignals kept in codebase for reference but not used on page
// import TrustSignals from '../components/TrustSignals.astro'
// WhyWithinly kept in codebase for reference but not used on this page
// import WhyWithinly from '../components/WhyWithinly.astro'
import FAQ from '../components/FAQ.astro'
import EarlyAccess from '../components/EarlyAccess.astro'
import { getTranslationsFromUrl, getTranslation } from '../utils/useTranslation.js'

// Get translations for current language
const translations = await getTranslationsFromUrl(Astro.url.pathname)
const t = (key: string, fallback = '') => {
  return getTranslation(translations, key, {}, fallback)
}

// Page metadata
const pageTitle = t('meta.defaultTitle')
const pageDescription = t('meta.defaultDescription')
---

<DefaultLayout title={pageTitle} description={pageDescription}>
  <!-- Hero Section -->
  <HeroWithinly showSignup={false} />

  <!-- Opening Hook Section -->
  <OpeningHook />

  <!-- How It Works Section -->
  <HowItWorks />

  <!-- Why Withinly -->
  <!-- <WhyWithinly /> -->

  <!-- Tried before section -->
  <TriedBeforeSection />

  <!-- Pricing/Features Comparison -->
  <FeatureComparison showPricing={false} />

  <!-- Testimonials -->
  <!-- <TestimonialSlider autoPlay={false} /> -->

  <!-- Trust & Safety (kept for reference; not rendered) -->

  <!-- FAQ Section -->
  <FAQ headline={t('faq.headline')} items={(translations as any).faq?.items || []} />

  <!-- Early Access Section -->
  <EarlyAccess />
</DefaultLayout>

<style lang="scss">
  @use '../assets/scss/base/breakpoint' as *;

  // Spacing between sections
  section + section {
    margin-top: 0;
  }

  // Focus management
  h2:focus,
  h3:focus {
    outline: 2px solid var(--color-primary-500);
    outline-offset: 4px;
    border-radius: var(--radius-s);
  }

  // Smooth scroll behavior
  html {
    scroll-behavior: smooth;
  }

  // Section spacing consistency
  section {
    scroll-margin-top: 80px; // Account for sticky header
  }
</style>
