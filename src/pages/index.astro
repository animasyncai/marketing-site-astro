---
/**
 * Withinly Landing Page (English)
 *
 * @description Clean landing page using refined component architecture
 */

import DefaultLayout from '../layouts/DefaultLayout.astro'
import HeroWithinly from '../components/HeroWithinly.astro'
import HowItWorks from '../components/HowItWorks.astro'
import DifferentiatorSection from '../components/DifferentiatorSection.astro'
import FeatureComparison from '../components/FeatureComparison.astro'
import TestimonialSlider from '../components/TestimonialSlider.astro'
import TrustSignals from '../components/TrustSignals.astro'
import EmailSignup from '../components/EmailSignup.astro'
import Button from '../components/Button.astro'
import { Icon } from 'astro-icon/components'
import { getTranslationsFromUrl, getTranslation } from '../utils/useTranslation.js'

// Get translations for current language
const translations = await getTranslationsFromUrl(Astro.url.pathname)
const t = (key: string, fallback = '') => {
  return getTranslation(translations, key, {}, fallback)
}

// Page metadata
const pageTitle = t('meta.defaultTitle')
const pageDescription = t('meta.defaultDescription')
---

<DefaultLayout title={pageTitle} description={pageDescription}>
  <!-- Hero Section -->
  <HeroWithinly showSignup={false} />

  <!-- Opening Hook Section -->
  <section class="bg-white py-20">
    <div class="mx-auto max-w-4xl px-4 text-center sm:px-6 lg:px-8">
      <h2 class="mb-6 text-3xl font-bold text-gray-900 sm:text-4xl">
        {t('hook.headline')}
      </h2>
      <div class="space-y-6 text-lg leading-relaxed text-gray-600">
        <p>{t('hook.description')}</p>
        <p class="text-xl font-medium text-gray-900">{t('hook.value')}</p>
      </div>
      <blockquote class="mt-10 text-xl font-medium text-purple-600 italic">
        "{t('hook.quote')}"
      </blockquote>
    </div>
  </section>

  <!-- How It Works Section -->
  <HowItWorks />

  <!-- What Makes Us Different -->
  <DifferentiatorSection />

  <!-- Pricing/Features Comparison -->
  <FeatureComparison showPricing={true} />

  <!-- Testimonials -->
  <TestimonialSlider autoPlay={false} />

  <!-- Trust & Safety -->
  <TrustSignals variant="horizontal" showDescriptions={true} />

  <!-- Early Access Section -->
  <section id="early-access" class="bg-gradient-to-br from-purple-600 to-blue-600 py-20 text-white">
    <div class="mx-auto max-w-4xl px-4 text-center sm:px-6 lg:px-8">
      <h2 class="mb-6 text-3xl font-bold sm:text-4xl">
        {t('earlyAccess.headline')}
      </h2>
      <p class="mb-12 text-xl leading-relaxed text-purple-100">
        {t('earlyAccess.description')}
      </p>

      <div class="mx-auto mb-12 max-w-lg">
        <EmailSignup
          variant="hero"
          title={t('signup.headline')}
          description={t('signup.description')}
          showLabels={false}
          class="text-gray-900"
        />
      </div>

      <div class="mx-auto mb-8 grid max-w-2xl gap-6 text-left sm:grid-cols-2">
        {
          translations.earlyAccess?.benefits?.items?.map((benefit) => (
            <div class="flex items-center gap-3">
              <Icon name="lucide:check" class="h-5 w-5 flex-shrink-0 text-purple-200" />
              <span class="text-purple-100">{benefit}</span>
            </div>
          ))
        }
      </div>

      <p class="text-sm text-purple-200 italic">
        {t('earlyAccess.urgency')}
      </p>
    </div>
  </section>

  <!-- Closing Section -->
  <section class="bg-gray-900 py-16 text-white">
    <div class="mx-auto max-w-4xl px-4 text-center sm:px-6 lg:px-8">
      <h2 class="mb-6 text-2xl font-bold sm:text-3xl">
        {t('closing.headline')}
      </h2>
      <p class="mb-6 text-lg leading-relaxed text-gray-300">
        {t('closing.description')}
      </p>
      <p class="mb-4 text-gray-400">
        <a href="mailto:hello@withinly.com" class="text-purple-400 transition-colors hover:text-purple-300">
          {t('closing.contact')}
        </a>
      </p>
      <p class="text-sm text-gray-500">
        {t('closing.languages')}
      </p>
    </div>
  </section>
</DefaultLayout>
