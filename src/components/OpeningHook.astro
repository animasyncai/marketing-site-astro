---
/**
 * Opening Hook Component
 *
 * @description Displays the opening hook section with familiar patterns and a quote
 */

import { getTranslationsFromUrl, getTranslation } from '../utils/useTranslation.js'
import { Icon } from 'astro-icon/components'

// Get translations for current language
const translations = await getTranslationsFromUrl(Astro.url.pathname)
const t = (key: string, fallback = '') => {
  return getTranslation(translations, key, {}, fallback)
}
---

<section class="bg-white py-16" aria-labelledby="hook-headline">
  <div class="mx-auto max-w-4xl px-4 text-center sm:px-6 lg:px-8">
    <h2 id="hook-headline" class="mb-8 text-3xl font-bold text-gray-900 sm:text-4xl">
      {t('hook.headline')}
    </h2>

    <!-- Pills list -->
    <div class="mx-auto mb-6 max-w-3xl">
      <div class="grid grid-cols-2 gap-2 sm:gap-3">
        {
          (translations as any).hook?.bullets?.map((bullet: string, index: number) => {
            const icons = ['lucide:heart-off', 'lucide:message-square-x', 'lucide:zap', 'lucide:help-circle']
            return (
              <div class="flex items-center gap-2 rounded-full bg-purple-50 px-3 py-2 text-left transition-colors hover:bg-purple-100 sm:gap-3 sm:px-4 sm:py-3">
                <Icon
                  name={icons[index] || 'lucide:circle'}
                  class="h-4 w-4 flex-shrink-0 text-purple-600 sm:h-5 sm:w-5"
                />
                <span class="text-sm text-gray-700 sm:text-base">{bullet}</span>
              </div>
            )
          }) || []
        }
      </div>
    </div>

    <p class="mx-auto mb-8 max-w-2xl text-lg leading-relaxed text-gray-600">
      {t('hook.description')}
    </p>

    <blockquote
      class="text-primary mx-auto max-w-2xl border-l-4 border-purple-200 pl-6 text-left text-xl font-medium italic"
    >
      "{t('hook.quote')}"
    </blockquote>
  </div>
</section>

<style lang="scss">
  @use '../assets/scss/base/breakpoint' as *;

  // Hook section styling
  .bg-white {
    position: relative;

    &::before {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: linear-gradient(135deg, rgba(168, 85, 247, 0.02) 0%, rgba(59, 130, 246, 0.02) 100%);
      pointer-events: none;
      content: '';
    }
  }

  // Enhanced blockquote styling
  blockquote {
    position: relative;

    &::before {
      position: absolute;
      top: -0.5rem;
      left: -0.25rem;
      content: '"';
      color: var(--color-purple-200);
      font-size: 4rem;
      line-height: 1;
      font-family: serif;
    }
  }

  // Pills styling
  .grid > div {
    transition: all 0.2s ease;

    &:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(168, 85, 247, 0.15);
    }
  }

  // Accessibility improvements
  h2:focus {
    outline: 2px solid var(--color-primary-500);
    outline-offset: 4px;
    border-radius: var(--radius-s);
  }

  // Responsive adjustments
  @include breakpoint(s) {
    .mx-auto.max-w-3xl {
      max-width: 100%;
    }
  }
</style>
