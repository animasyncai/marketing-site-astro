---
/**
 * Opening Hook Component
 *
 * @description Displays the opening hook section with what users will discover
 */

import { getTranslationsFromUrl, getTranslation } from '../utils/useTranslation.js'
import { Icon } from 'astro-icon/components'

// Get translations for current language
const translations = await getTranslationsFromUrl(Astro.url.pathname)
const t = (key: string, fallback = '') => {
  return getTranslation(translations, key, {}, fallback)
}

// Icons for each discovery
const discoveryIcons = [
  'lucide:sparkles', // Language for patterns
  'lucide:network', // Connect and disconnect
  'lucide:brain', // Private reflection space
  'lucide:heart-handshake', // Patterns meet
]
---

<section class="bg-white py-20" aria-labelledby="hook-headline">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <h2 id="hook-headline" class="mb-12 text-center text-3xl font-bold text-gray-900 sm:text-4xl">
      {t('hook.headline')}
    </h2>

    <!-- Discovery items -->
    <div class="mx-auto mb-12 max-w-6xl">
      <div class="grid gap-8 md:grid-cols-2">
        {
          (translations as any).hook?.discoveries?.map((discovery: any, index: number) => (
            <div class="discovery-card relative overflow-hidden rounded-2xl border border-gray-200/80 bg-white p-6 shadow-sm sm:p-8">
              <!-- Background icon -->
              <div class="discovery-icon absolute right-4 top-1/2 -translate-y-1/2 translate-x-4 opacity-5 sm:opacity-[0.06]">
                <Icon name={discoveryIcons[index % discoveryIcons.length]} class="h-32 w-32 text-gray-900 sm:h-40 sm:w-40" />
              </div>
              
              <!-- Content -->
              <div class="relative z-10">
                <h3 class="discovery-title mb-3 text-base font-semibold text-gray-900 sm:text-lg">{discovery.title}</h3>
                <p class="text-sm leading-relaxed text-gray-600 sm:text-base">{discovery.description}</p>
              </div>
            </div>
          )) || []
        }
      </div>
    </div>

    <!-- Closing tagline -->
    <p class="mx-auto mt-12 max-w-2xl text-center text-base leading-relaxed text-gray-600 italic sm:text-lg">
      {t('hook.tagline')}
    </p>
  </div>
</section>

<style lang="scss">
  @use '../assets/scss/base/breakpoint' as *;

  // Hook section styling
  .bg-white {
    position: relative;

    &::before {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: linear-gradient(135deg, rgba(168, 85, 247, 0.02) 0%, rgba(59, 130, 246, 0.02) 100%);
      pointer-events: none;
      content: '';
    }
  }

  // Discovery card styling
  .discovery-card {
    position: relative;
  }

  // Background icon styling
  .discovery-icon {
    pointer-events: none;
    user-select: none;
  }

  // Override text-wrap balance for discovery titles
  .discovery-title {
    text-wrap: unset;
  }

  // Accessibility improvements
  h2:focus,
  h3:focus {
    outline: 2px solid var(--color-primary-500);
    outline-offset: 4px;
    border-radius: var(--radius-s);
  }

  // Responsive adjustments
  @include breakpoint(s) {
    .mx-auto.max-w-3xl {
      max-width: 100%;
    }
  }
</style>
